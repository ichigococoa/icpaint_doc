---
hide:
  - toc
---

ほかのペイントソフトでは、1つのテキストレイヤーに、文章は1つで、フォントも1つ、
という仕様であることが多いかと思います。

しかし、このペイントソフトでは、1つのテキストレイヤーに、複数の文章を保持し、
各文章ごとにフォント・位置・サイズなどを個別に設定する仕様です。

もちろんテキストレイヤーを複数作成することもできます。

テキストレイヤーの内容はいつでもあとから修正することができます。


## テキストレイヤーを使う流れ

1. メニューの「レイヤー」をクリックし、「レイヤー作成」から「__新規テキストレイヤー__」をクリックします

1. 「ツール選択」ウィンドウで「__テキスト__」をクリックします

1. 「ツール」ウィンドウで「__編集を開始する__」をクリックします

1. 「__テキストを追加__」をクリックします。
これで文章が1つ追加されます

1. 「__テキストを変更__」をクリックします。
ダイアログが表示されるので、そこに表示したい文章を入力し OK ボタンを押します。
改行付きで複数行入力することもできます

1. 「フォントウィンドウ」をクリックします。
「フォント」ウィンドウが表示されます

1. 「フォント」ウィンドウで「__追加__」をクリックします。
ダイアログが表示されるので、使いたいフォントを選択し、「開く」をクリックします

1. 「フォント」ウィンドウで「__設定__」をクリックします。
これで先ほどの文章にこのフォントが適用されます

1. この時点でキャンバスの左下に文章が表示されています

現在、「__編集を開始する__」をクリックしてから「__編集を終了する__」までの間は、
キャンバスの回転と左右反転表示をすることはできません。
キャンバスの移動とズームはできます。

メニューの「レイヤー」をクリックし、「レイヤー操作」から「__レイヤーのラスタライズ__」をクリックすることで、
テキストレイヤーから描画レイヤーに変換することができます。


## 文章を表示したあとの操作

キャンバス内でクリックしドラッグすることで、選択した文章を移動することができます。

「ツール」ウィンドウでサイズや行間などを変更できます。
各文章ごとに設定できる項目は、

+ フォント
+ キャンバス内での各文章の位置
+ 文字のサイズ ( px 単位)
+ 行と行の間隔 (1 行に対する比率)
+ 文字と文字の間隔 (1 文字に対する比率)
+ 文字の色 (RGBA)
+ アンチエイリアスの文字か、または、ぼやけた部分のないドット絵向きの文字か
+ 太字であるかどうか
+ 斜体文字であるかどうか
+ 横書きか、または、縦書きか

文章の色の設定は、「色」ウィンドウで使いたい色に変更したあとで、
「ツール」ウィンドウの「設定」「取得」の「設定」ボタンをクリックすることで、その色に変更されます。
「色」ウィンドウの中の下にある4本のバーは R G B A を表していて、 A を 255 より小さくすることで
半透明の色を設定することができます。
現在使用している文章の色は、「取得」ボタンをクリックすることで、「色」ウィンドウにその色が反映されます。


別の文章を追加したい場合は、「ツール」ウィンドウで「__テキストを追加__」をクリックすることで追加できます。
そのあとは、先ほどと同様に、「__テキストを変更__」をクリックし、
「フォント」ウィンドウで「設定」をクリックすることで、フォントが適用されて、文章が表示されます。

「ツール」ウィンドウの「文章数 〇」の下に追加した文章が並べて表示されます。
それぞれの文章をクリックすることで、操作したい文章を選択することができます。

「ツール」ウィンドウで「__編集を終了する__」をクリックすることでテキストの編集を終えます。
再び「編集を開始する」をクリックすることで何度でもテキストを修正できます。

「編集を終了する」をクリックすることで、通常の描画レイヤーと同様に、
レイヤーの不透明度や合成モードやレイヤーマスクなどが適用されます。


## フォントについて

読み込むことができるフォントの拡張子は .ttf, .ttc, .otf, .otc の 4 種類です。

「フォント」ウィンドウで「__追加__」をクリックしてフォントを開く時、
このダイアログでは「__C:\Windows\Fonts__」のフォルダを開くことができません。

「C:\Windows\Fonts」のフォルダの中のフォントを使いたい場合は、エクスプローラーで「C:\Windows\Fonts」を開いて、
使いたいフォントを選択し、右クリックから「コピー」をし、どこか別のフォルダで「貼り付け」をしてから、
そのフォルダの .ttf などを選択して開いてください。

「フォント」ウィンドウで「追加」をクリックしてフォントを追加したものの、使わないと判断した場合は、
「__削除__」をクリックすることでフォントを削除することができます。
これは元のフォントファイル (.ttf など) を削除するわけではありません。
あくまで、このペイントソフト内での読み込んだフォントの削除です。

フォントを削除する時、そのフォントをいずれかのキャンバスのテキストレイヤーの中で使っていた場合は、
文章は表示されたまま維持されますが、キャンバスを保存して開く時やそのテキストレイヤーを編集する時に、
フォントが読み込まれていないため、文章が表示されない状態になるので注意してください。


## テキストの並び替え

1つのテキストレイヤーの中に複数の文章を使っていて、文章同士が重なり合っている場合、
「ツール」ウィンドウのの中の次の 4 つのボタンでテキストの並び替えができます。

+ 「__テキストを前面へ(手前に)__」
+ 「__テキストを背面へ(後ろに)__」
+ 「__テキストを最前面へ(最上部)__」
+ 「__テキストを最背面へ(最下部)__」


## テキストレイヤーの保存と読み込み

「ツール」ウィンドウの「__読込__」と「__保存__」ボタンで、
テキストレイヤーの中のすべての文章とその設定内容を json 形式で保存し、読み込むことができます。

この機能は必要がなければ使う必要はありません。

たくさんの文章をキャンバス内に表示していて、各文章をテキストエディタで管理・編集したい場合や、
テキストレイヤーの内容を別のキャンバスで使い回したい場合などの状況で役に立つかもしれません。

保存した json は、テキストエディタで編集することができます。
保存した json をテキストエディタで編集する時は、各行の行末のカンマのあり・なしに注意してください。

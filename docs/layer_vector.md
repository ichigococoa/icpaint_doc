---
hide:
  - toc
---

ベクターレイヤーでは、以下のようなことができます。

+ 点と点を結び、カーブまたは直線を描くことができます

+ すべての点を結ぶ閉じた領域を自動で塗りつぶすことができます

+ カーブに沿って自動でブラシで描画することができます

+ ベクターレイヤーの内容はいつでもあとから修正することができます

このペイントソフトでは、ベクターレイヤー内で操作する点を、「制御点」と呼びます。

制御点と制御点を結ぶ線を「カーブ」と呼びます。


## ベクターレイヤーを使う流れ

1. メニューの「レイヤー」をクリックし、「レイヤー作成」から「__新規ベクターレイヤー__」をクリックします

1. 「ツール選択」ウィンドウで「__ベクター__」をクリックします

1. 「ツール」ウィンドウで「__編集を開始する__」をクリックします

1. キャンバス内で始点にしたい位置でクリックし、別の位置で再度クリックをします
(これらの位置はあとでいつでも修正できます)

1. この時点で最初にクリックした位置と2回目にクリックした位置で線が結ばれます

「ツール」ウィンドウで「__編集を終了する__」をクリックすることでカーブの編集を終えます。
再び「編集を開始する」をクリックすることで何度でもカーブを修正できます。

「編集を終了する」をクリックすることで、通常の描画レイヤーと同様に、
レイヤーの不透明度や合成モードやレイヤーマスクなどが適用されます。


## カーブを表示したあとの操作

+ すでにある制御点をクリックすることでその制御点を選択できます(緑色の制御点が赤色になります)

+ 制御点を選択した状態で、キャンバス内のどこかをクリックすることで、その位置に新たに制御点が作成され、
制御点を結ぶカーブも作成されます

+ キャンバス内のどこかを Alt + クリックすることで制御点の選択を解除できます

+ 制御点を選択していない状態で、キャンバス内のどこかをクリックすることで、別のカーブとして制御点が作成されます

+ 1 つのベクターレイヤーで、複数のカーブを保持することができます

+ 制御点をクリックしてドラッグすることで、制御点を移動させることができます。
制御点の位置に応じて、自動的にカーブの形状も制御点を通るようにして変化します

+ 制御点を選択した状態で、そのカーブ上のどこかをクリックすることで、その位置に制御点を追加することができます

+ 制御点を Ctrl + クリックすることで、制御点を鋭角にすることができます。
閉じていないカーブの両端のどちらかの制御点と鋭角にした制御点、もしくは、鋭角にした制御点同士が結ぶ線は、
カーブではなく直線になります

+ 鋭角にした制御点を Ctrl + クリックすることで、滑らかなカーブ上の制御点に戻すことができます

+ 制御点を選択した状態で、キャンバス内のどこかを Ctrl + クリックすることで、
その位置に新たに鋭角にした制御点が作成され、制御点を結ぶカーブも作成されます

+ 制御点を Alt + クリックすることで、その制御点を削除することができます

+ 1 つのカーブ上にあるすべての制御点を Alt + クリックで削除することで、カーブ自体を削除することができます

+ 制御点を選択した状態で、キャンバス内のどこかを Shift + Alt + ドラッグすることで、
カーブ全体を移動させることができます

+ 制御点を選択した状態で、キャンバス内のどこかを Ctrl + Shift + ドラッグすることで、
カーブ全体を複製することができ、そのまま移動させることができます

+ Shift を押しながらマウスまたはペン先を動かすと、カーソル位置を中心位置とする円が表示されます。
Shift + ドラッグすることで、この円の内側にある制御点をまとめて移動させることができます。
動かせる制御点は、選択しているカーブ上にある制御点のみです。別のカーブ上にある制御点には作用しません

+ 左右に Ctrl + Alt + ドラッグすることで、この円の大きさを変更することができます


## カーブを表示したあとの操作(まとめ)

| 実行したい操作 | 操作内容 |
| ------ | ----------- |
| 制御点の選択(選択された制御点は赤色)     | 制御点をクリック |
| 制御点の選択解除                         | どこかを Alt + クリック |
| 制御点の移動                             | 制御点をドラッグ |
| 制御点の削除                             | 制御点を Alt + クリック |
| 制御点の切り替え(鋭角か滑らかなカーブか) | 制御点を Ctrl + クリック |
| カーブの最後に制御点を追加               | 制御点を選択した状態でどこかをクリック |
| カーブの途中に制御点を追加               | 制御点を選択した状態でカーブ上のどこかをクリック |
| カーブの最後に制御点(鋭角)を追加         | 制御点を選択した状態でどこかを Ctrl + クリック |
| カーブの途中に制御点(鋭角)を追加         | 制御点を選択した状態でカーブ上のどこかを Ctrl + クリック |
| 別のカーブとして制御点を作成             | 制御点を選択していない状態でどこかをクリック |
| 別のカーブとして制御点(鋭角)を作成       | 制御点を選択していない状態でどこかを Ctrl + クリック |
| カーブの削除                             | すべての制御点で Alt + クリックを繰り返す |
| カーブの形状を維持したままカーブの移動   | 制御点を選択した状態で Shift + Alt + ドラッグ |
| カーブの複製                             | 制御点を選択した状態で Ctrl + Shift + ドラッグ |
| 制御点をまとめて移動                     | Shift + ドラッグで、円の内側にある制御点をまとめて移動 |
| まとめて移動させる際の円の大きさを変更   | 左右に Ctrl + Alt + ドラッグ |

カーブの削除は、制御点を選択した状態で、
「ツール」ウィンドウの中の「__カーブの削除__」をクリックすることでも削除できます。


## カーブの並び替え

1 つのベクターレイヤーの中に複数のカーブを使っていて、カーブ同士が重なり合っている場合、
「ツール」ウィンドウの中の次の 4 つのボタンでカーブの並び替えができます。

+ 「__カーブを前面へ(手前に)__」
+ 「__カーブを背面へ(後ろに)__」
+ 「__カーブを最前面へ(最上部)__」
+ 「__カーブを最背面へ(最下部)__」


## カーブのパラメータ

制御点を選択すると、「ツール」ウィンドウで、そのカーブのパラメータを調節することができます。

+ 「__角度__」を変更することで、制御点の位置のカーブの形状を変えることができます。
制御点を Ctrl + クリックして、鋭角にした場合は、制御点の右側と左側で、別々の角度を設定することができます

+ 「__角度のリセット__」ボタンをクリックすることで、デフォルトの角度に戻します

+ 「__線を描画する__」をオンにした場合は、ぼやけた部分のないドット絵向きの 1 px の線がカーブ上に描画されます

+ アンチエイリアスのある細い線で描画したい場合は、「線を描画する」をオフにして、「__ブラシで描画する__」をオンにし、
「間隔」を 1 ~ 2、「円」を「よりソフト」、「サイズ」を小さくすれば、
アンチエイリアスのあるなめらかな細い線として描画されます

+ 制御点が 3 つ以上ある場合は、「__線を閉じる__」をオンにすることで、始点と終点をカーブでつなげることができます。
閉じた位置の制御点付近で、なめらかなカーブになっていない場合、その制御点を選択し、
「ツール」ウィンドウの中の「角度」を調節することで、なめらかなカーブにすることができます

+ 「__塗りつぶす__」をオンにすることで、閉じた領域を自動で塗りつぶすことができます

+ 線の色や塗りつぶす色の設定は、「色」ウィンドウで使いたい色に変更したあとで、
「ツール」ウィンドウの「設定」「取得」の「設定」ボタンをクリックすることで、その色に変更されます。
「色」ウィンドウの中の下にある4本のバーは R G B A を表していて、 A を 255 より小さくすることで
半透明の色を設定することができます。
現在使用している色は、「取得」ボタンをクリックすることで、「色」ウィンドウにその色が反映されます

+ 「塗りつぶし画像ウィンドウ」をクリックすると、「用紙質感画像」ウィンドウが表示されるので、
「追加」をクリックして、画像を読み込み、「__カーブに設定(ベクターレイヤー)__」をクリックすることで、
塗りつぶした色に用紙質感を適用することができます

+ 塗りつぶし画像を適用している場合のパラメータ
    + 「__拡大率__」で、用紙質感画像の効果を拡大縮小できます
    + 「__強さ__」で、用紙質感の効果を調節できます
    + 「__RGB 反転__」で、 RGB をそれぞれ反転します
    + 「__アルファを使用__」は、オンにすると、用紙質感の RGBA の A を使います
      例えば、透明な背景に小さめのイラストを描いた画像(png 形式)があったとして、
      それを用紙質感画像として使う場合、
      「アルファを使用」をオンにすると、画像の透明な部分は描画されない状態になります
    + 「__画像の取り外し__」をクリックすることで、用紙質感の適用を解除することができます。

+ 「__最小サイズ__」と「__最小濃度__」は、「筆圧点を表示」をオンにして「筆圧」を 1.0 より小さくした場合に、
効果が表れます

+ 「__筆圧点__」は、カーブを作成した時は、カーブの始点と終点の位置に 2 つだけ筆圧点が存在します(番号は 0 と 1)

+ 「__筆圧点を挿入__」ボタンをクリックすることで筆圧点を追加できます。「番号」を変えて操作する筆圧点を選択し、
「筆圧」と「位置」をそれぞれ調節できます

+ 複数の筆圧点を追加し、各筆圧点の「筆圧」や「位置」を調節することで、カーブ上のブラシのサイズや濃度を
色々変化させることができます

+ カーブの始点と終点の位置にある筆圧点は削除することができません(「番号」の最初と最後の筆圧点のことです)


## ベクターレイヤーの保存と読み込み

「ツール」ウィンドウの「__読込__」と「__保存__」ボタンで、
ベクターレイヤーの中のすべてのカーブとその設定内容を json 形式で保存し、読み込むことができます。

この機能は必要がなければ使う必要はありません。

ベクターレイヤーの内容を別のキャンバスで使い回したい場合などの状況で役に立つかもしれません。

保存した json は、テキストエディタで編集することができます。
保存した json をテキストエディタで編集する時は、各行の行末のカンマのあり・なしに注意してください。
